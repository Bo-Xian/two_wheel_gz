<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="SHORTCUT ICON" href="picture/icon.png">

	<link rel="stylesheet" type="text/css" rel="stylesheet" href="./css/style.css">
	<title>Walking Interface</title>
	<style>
		#header {
				text-align: center;
				color: #FFFFFF;
				margin-top: 0;
			}
			section {
        		background-color:  #333;
    	    	padding: 10px;
        		margin: 10px;
				width: 30%;
				height: 500px;
				border: 2px black solid;
				color: white;
       		}
       		#control{
       			width: 90%;
       			margin: 20px auto;
			   }
			   
			#leftbox
			{
				margin-left: 20%;
			}

			#rightbox
			{
				margin-right: 20%;
			}
			#Wave{
				position:absolute;
				left:345px;
				top:635px;
				background-color:  #333;
    	    	padding: 10px;
        		margin: 10px;
				width: 800px;
				height: 235px;
				border: 2px black solid;
				color: white;
			}
			body
			{
				width: 1520px;
				height: 1000px;
				overflow: visible;
				background-size: cover;
			}

		</style>
	<script type="text/javascript" src="./js/roslib/eventemitter2.min.js"></script>
	<script type="text/javascript" src="./js/roslib/roslib.min.js"></script>
	<script type="text/javascript">
		var ros = new ROSLIB.Ros({ url: 'ws://localhost:9090' });
		ros.on('connection', function () {
			console.log('Connection made!');
			document.getElementById('connected').style.display = 'inline';
		});
		ros.on('error', function (error) {
			console.log('Error connecting to websocket server: ', error);
		});
		ros.on('close', function () {
			console.log('Connection to websocket server closed.');
		});
		var WaveRequest_Topic = new ROSLIB.Topic({
				ros: ros,
				name: '/WaveRequest_Topic',
				messageType: 'std_msgs/Bool'
		});
		var SendBodyAuto_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/SendBodyAuto_Topic',
			messageType: 'tku_msgs/Interface'
		});
		var ContinousMode_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/ContinousMode_Topic',
			messageType: 'std_msgs/Int16'
		});
		var ChangeContinuousValue_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/ChangeContinuousValue_Topic',
			messageType: 'tku_msgs/Interface'
		});
		var web_parameter_Topic = new ROSLIB.Topic({
			ros: ros,
			name: 'web/parameter_Topic',
			messageType: 'tku_msgs/parameter'
		});
		var Wave_Topic = new ROSLIB.Topic({
			ros: ros,
			name: '/wave',
			messageType: 'tku_msgs/wavelist'
		});
		var Continuousback_Topic = new ROSLIB.Topic({
			ros: ros,
			name: 'walkinggait/Continuousback',
			messageType: 'std_msgs/Bool'
		});
		var SensorPackage_Subscriber = new ROSLIB.Topic({
			ros: ros,
			name: '/package/sensorpackage',
			messageType: 'tku_msgs/SensorPackage'
		});
		var SensorSet_Publisher = new ROSLIB.Topic({
			ros: ros,
			name: '/web/sensorset',
			messageType: 'tku_msgs/SensorSet'
		});
		var Thtavaluetmp = 0;
		var Xvaluetmp = 0;
		var Yvaluetmp = 0;
		var statetype = 0;
		var ContinousModetmp = 0;
		var Walkinggait_topic = new ROSLIB.Message({
			x: 0,
			y: 0,
			z: 0,
			thta: 0,
			walking_mode: 0,
			walking_state: 0,
			sensor_mode: 0
		})
		var ContinousMode_msg = new ROSLIB.Message({
			data: 0
		})
		var wave_msg = new ROSLIB.Message({
			wavelist: [0]
		})
		var WaveRequest_msg = new ROSLIB.Message({
			data: true
		})
		var Continuousback_msg = new ROSLIB.Message({
			data: false
		})
		var SensorSet_msg = new ROSLIB.Message({
			Roll: 0,
			Pitch: 0,
			Yaw: 0,
			SensorReq: false,
			ForceOffsetReset: false,
			ForceState: false
		})
		/* test msg */
		var X_Swing_Range_tmp = 0;
		var Y_Swing_Range_tmp = 2.9;
		var Z_Swing_Range_tmp = 0;
		var Period_T_tmp = 1200;
		var Period_T2_tmp = 600;
		var Sample_Time_tmp = 40;
		var OSC_LockRange_tmp = 0.56;
		var BASE_Default_Z_tmp = 3.2;
		var Y_Swing_Shift_tmp = 0.6;
		var X_Swing_COM_tmp = 0.0;
		var BASE_LIFT_Z_tmp = 0.0;
		var parameter_msg = new ROSLIB.Message({
			X_Swing_Range: 0,
			Y_Swing_Range: 2.9,
			Z_Swing_Range: 0,
			Period_T: 1200,
			Period_T2: 600,
			Sample_Time: 40,
			OSC_LockRange: 0.56,
			BASE_Default_Z: 3.2,
			Y_Swing_Shift: 0.6,
			X_Swing_COM: 0.0,
			BASE_LIFT_Z: 0.0
		})
		var r_move_x=[];
		var l_move_x=[];
		var r_move_y=[];
		var l_move_y=[];
		var r_move_z=[];
		var l_move_z=[];
		var move_com_x=[];
		var move_com_y=[];
		var move_com_z=[];
		var r_Thta=[];
		var l_Thta=[];
		var point=[];
		var r_move_x_tmp=[];
		var l_move_x_tmp=[];
		var r_move_y_tmp=[];
		var l_move_y_tmp=[];
		var r_move_z_tmp=[];
		var l_move_z_tmp=[];
		var move_com_x_tmp=[];
		var move_com_y_tmp=[];
		var move_com_z_tmp=[];
		var r_Thta_tmp=[];
		var l_Thta_tmp=[];
		var point_tmp=[];
		var datalong = 0;
		var wavecolor = 0;
		var waveinitflag = true;
		var xpointvalue_tmp = 0;
		var ypointvalue_tmp = 0;
		/* test end */
		SensorPackage_Subscriber.subscribe(function (msg)
		{		
			document.getElementById("Roll").value = msg.IMUData[0];
			document.getElementById("Pitch").value = msg.IMUData[1];
			document.getElementById("Yaw").value = msg.IMUData[2];
			document.getElementById("Left_1").value = msg.ForceSensorData[0];
			document.getElementById("Left_2").value = msg.ForceSensorData[1];
			document.getElementById("Left_3").value = msg.ForceSensorData[2];
			document.getElementById("Left_4").value = msg.ForceSensorData[3];
			document.getElementById("Right_1").value = msg.ForceSensorData[4];
			document.getElementById("Right_2").value = msg.ForceSensorData[5];
			document.getElementById("Right_3").value = msg.ForceSensorData[6];
			document.getElementById("Right_4").value = msg.ForceSensorData[7];
		});

		function LeftTurnFun() {
			Thtavaluetmp = Number(Thtavaluetmp) + 1;
			document.getElementById("Thtavalue").value = Thtavaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function ForwardFun() {
			Xvaluetmp = Number(Xvaluetmp) + 100;
			document.getElementById("Xvalue").value = Xvaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function RightTurnFun() {
			Thtavaluetmp = Number(Thtavaluetmp) - 1;
			document.getElementById("Thtavalue").value = Thtavaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function LeftFun() {
			Yvaluetmp = Number(Yvaluetmp) + 100;
			document.getElementById("Yvalue").value = Yvaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function RightFun() {
			Yvaluetmp = Number(Yvaluetmp) - 100;
			document.getElementById("Yvalue").value = Yvaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function StopFun() {
			Thtavaluetmp = 0;
			Xvaluetmp = 0;
			Yvaluetmp = 0;
			statetype = 4;
			document.getElementById("Thtavalue").value = Thtavaluetmp;
			document.getElementById("Xvalue").value = Xvaluetmp;
			document.getElementById("Yvalue").value = Yvaluetmp;
			//Thtavalue.value = Thtavalue.value + 1;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function BackwardFun() {
			Xvaluetmp = Number(Xvaluetmp) - 100;
			document.getElementById("Xvalue").value = Xvaluetmp;
			if (statetype == 1 ||statetype == 7 || statetype == 8) {
				ChangeContinuousValueFun();
			}
		}
		function Generate() {
			ClearDrawFun();
			if (statetype == 1 && ContinousModetmp == 0) {
				ContinousMode_msg.data = 1;
				ContinousModetmp = 1;
				ContinousMode_Topic.publish(ContinousMode_msg);
			} 
			else if (statetype == 1 && ContinousModetmp == 1) 
			{
				ContinousMode_msg.data = 0;
				ContinousModetmp = 0;
				ContinousMode_Topic.publish(ContinousMode_msg);
			} 
			else if (statetype == 7 && ContinousModetmp == 0) 
			{
				ContinousMode_msg.data = 1;
				ContinousModetmp = 1;
				ContinousMode_Topic.publish(ContinousMode_msg);
			} 
			else if (statetype == 7 && ContinousModetmp == 1) 
			{
				ContinousMode_msg.data = 0;
				ContinousModetmp = 0;
				ContinousMode_Topic.publish(ContinousMode_msg);
			} 
			else if (statetype == 8 && ContinousModetmp == 0) 
			{
				ContinousMode_msg.data = 1;
				ContinousModetmp = 1;
				ContinousMode_Topic.publish(ContinousMode_msg);
			} 
			else if (statetype == 8 && ContinousModetmp == 1) 
			{
				ContinousMode_msg.data = 0;
				ContinousModetmp = 0;
				ContinousMode_Topic.publish(ContinousMode_msg);
			}
			SendBodyAutoFun();
		}

		function ChangeContinuousValueFun() {
			Walkinggait_topic.x = Number(Xvaluetmp);
			Walkinggait_topic.y = Number(Yvaluetmp);
			Walkinggait_topic.z = 0;
			Walkinggait_topic.thta = Number(Thtavaluetmp);
			Walkinggait_topic.walking_mode = Number(statetype);
			Walkinggait_topic.sensor_mode = Number(document.getElementById("IMU_Control").value);
			console.log(Walkinggait_topic.sensor_mode);
			ChangeContinuousValue_Topic.publish(Walkinggait_topic);
		}
		function SendBodyAutoFun() {
			Walkinggait_topic.x = Number(Xvaluetmp);
			Walkinggait_topic.y = Number(Yvaluetmp);
			Walkinggait_topic.z = 0;
			Walkinggait_topic.thta = Number(Thtavaluetmp);
			Walkinggait_topic.walking_mode = Number(statetype);
			Walkinggait_topic.sensor_mode = Number(document.getElementById("IMU_Control").value);
			console.log(Walkinggait_topic.sensor_mode);
			SendBodyAuto_Topic.publish(Walkinggait_topic);
		}
		function changeXvalue(value) {
			Xvaluetmp = value;
			document.getElementById("Xvalue").value = Xvaluetmp;
		}
		function changeYvalue(value) {
			Yvaluetmp = value;
			document.getElementById("Yvalue").value = Yvaluetmp;
		}
		function changethtavalue(value) {
			Thtavaluetmp = value;
			document.getElementById("Thtavalue").value = Thtavaluetmp;
		}
		function singleFun() {
			statetype = 0;
			document.getElementById("singlestep").style.display = "inline";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function ContinuousFun() {
			statetype = 1;
			document.getElementById("singlestep").style.display = "none";
			document.getElementById("continuousstep").style.display = "inline";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function Continuous_Second_Fun() {
			statetype = 7;
			document.getElementById("singlestep").style.display = "none";
			document.getElementById("continuousstep").style.display = "inline";
			document.getElementById("continuousstep_second").style.display = "inline";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function Continuous_Third_Fun() {
			statetype = 8;
			document.getElementById("singlestep").style.display = "none";
			document.getElementById("continuousstep").style.display = "inline";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "inline";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function LC_upFun() {
			statetype = 2;
			document.getElementById("singlestep").style.display = "none";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "inline";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function LC_downFun() {
			statetype = 3;
			document.getElementById("singlestep").style.display = "none";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "inline";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function LongJumpFun() {
			statetype = 4;
			document.getElementById("singlestep").style.display = "inline";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "inline";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function Single_woodFun() {
			statetype = 5;
			document.getElementById("singlestep").style.display = "inline";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("Wood").style.display = "inline";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("singlestep_third").style.display = "none";
		}
		function Single_thirdFun() {
			statetype = 6;
			document.getElementById("singlestep").style.display = "inline";
			document.getElementById("continuousstep").style.display = "none";
			document.getElementById("continuousstep_second").style.display = "none";
			document.getElementById("continuousstep_third").style.display = "none";
			document.getElementById("lcupstep").style.display = "none";
			document.getElementById("lcdownstep").style.display = "none";
			document.getElementById("Wood").style.display = "none";
			document.getElementById("LongJumpTitle").style.display = "none";
			document.getElementById("singlestep_third").style.display = "inline";
		}
		function Load() {
			if (document.getElementById("Continuousback").checked) {
				Continuousback_msg.data = true;
				console.log("checked");
			}
			else {
				Continuousback_msg.data = false;
				console.log("unchecked");
			}
			Continuousback_Topic.publish(Continuousback_msg);
			console.log('statetype = ', statetype);
			var LoadWalkingGaitParameterClient = new ROSLIB.Service({
				ros: ros,
				name: '/web/LoadWalkingGaitParameter',
				serviceType: 'tku_msgs/WalkingGaitParameter'
			});
			var WalkingGaitParameter_request = new ROSLIB.ServiceRequest({
				mode: 0
			});
			WalkingGaitParameter_request.mode = Number(statetype);
			LoadWalkingGaitParameterClient.callService(WalkingGaitParameter_request, function (walkinggait_parameter) {
				X_Swing_Range_tmp = walkinggait_parameter.X_Swing_Range;
				Y_Swing_Range_tmp = walkinggait_parameter.Y_Swing_Range;
				Z_Swing_Range_tmp = walkinggait_parameter.Z_Swing_Range;
				Period_T_tmp = walkinggait_parameter.Period_T;
				Period_T2_tmp = walkinggait_parameter.Period_T2;
				Sample_Time_tmp = walkinggait_parameter.Sample_Time;
				OSC_LockRange_tmp = walkinggait_parameter.OSC_LockRange;
				BASE_Default_Z_tmp = walkinggait_parameter.BASE_Default_Z;
				Y_Swing_Shift_tmp = walkinggait_parameter.Y_Swing_Shift;
				X_Swing_COM_tmp = walkinggait_parameter.X_Swing_COM;
				BASE_LIFT_Z_tmp = walkinggait_parameter.BASE_LIFT_Z;
				switch (statetype) {
					case 6:
					case 5:
					case 4:
					case 0:
						document.getElementById("X_Swing").value = X_Swing_Range_tmp;
						document.getElementById("Y_Swing").value = Y_Swing_Range_tmp;
						document.getElementById("Z_Swing").value = Z_Swing_Range_tmp;
						document.getElementById("Period_T").value = Period_T_tmp;
						document.getElementById("Period_T2").value = Period_T2_tmp;
						document.getElementById("Sample_Time").value = Sample_Time_tmp;
						document.getElementById("OSC_LockRange").value = OSC_LockRange_tmp;
						document.getElementById("BASE_Default_Z").value = BASE_Default_Z_tmp;
						document.getElementById("Y_Swing_Shift").value = Y_Swing_Shift_tmp;
						break;
					case 7:
					case 8:
					case 1:
						document.getElementById("cX_Swing").value = X_Swing_Range_tmp;
						document.getElementById("cY_Swing").value = Y_Swing_Range_tmp;
						document.getElementById("cZ_Swing").value = Z_Swing_Range_tmp;
						document.getElementById("cPeriod_T").value = Period_T_tmp;
						document.getElementById("cPeriod_T2").value = Period_T2_tmp;
						document.getElementById("cSample_Time").value = Sample_Time_tmp;
						document.getElementById("cOSC_LockRange").value = OSC_LockRange_tmp;
						document.getElementById("cBASE_Default_Z").value = BASE_Default_Z_tmp;
						break;
					case 2:
						document.getElementById("luX_Swing").value = X_Swing_Range_tmp;
						document.getElementById("luY_Swing").value = Y_Swing_Range_tmp;
						document.getElementById("luZ_Swing").value = Z_Swing_Range_tmp;
						document.getElementById("luPeriod_T").value = Period_T_tmp;
						document.getElementById("luPeriod_T2").value = Period_T2_tmp;
						document.getElementById("luSample_Time").value = Sample_Time_tmp;
						document.getElementById("luOSC_LockRange").value = OSC_LockRange_tmp;
						document.getElementById("luBASE_Default_Z").value = BASE_Default_Z_tmp;
						document.getElementById("luX_Swing_COM").value = X_Swing_COM_tmp;
						document.getElementById("luBASE_LIFT_Z").value = BASE_LIFT_Z_tmp;
						break;
					case 3:
						document.getElementById("ldX_Swing").value = X_Swing_Range_tmp;
						document.getElementById("ldY_Swing").value = Y_Swing_Range_tmp;
						document.getElementById("ldZ_Swing").value = Z_Swing_Range_tmp;
						document.getElementById("ldPeriod_T").value = Period_T_tmp;
						document.getElementById("ldPeriod_T2").value = Period_T2_tmp;
						document.getElementById("ldSample_Time").value = Sample_Time_tmp;
						document.getElementById("ldOSC_LockRange").value = OSC_LockRange_tmp;
						document.getElementById("ldBASE_Default_Z").value = BASE_Default_Z_tmp;
						document.getElementById("ldX_Swing_COM").value = X_Swing_COM_tmp;
						document.getElementById("ldBASE_LIFT_Z").value = BASE_LIFT_Z_tmp;
						break;
				}
			});

		}
		function Save() {
			parameter_msg.mode = Number(statetype);
			parameter_msg.X_Swing_Range = Number(X_Swing_Range_tmp);
			parameter_msg.Y_Swing_Range = Number(Y_Swing_Range_tmp);
			parameter_msg.Z_Swing_Range = Number(Z_Swing_Range_tmp);
			parameter_msg.Period_T = Number(Period_T_tmp);
			parameter_msg.Period_T2 = Number(Period_T2_tmp);
			parameter_msg.Sample_Time = Number(Sample_Time_tmp);
			parameter_msg.OSC_LockRange = Number(OSC_LockRange_tmp);
			parameter_msg.BASE_Default_Z = Number(BASE_Default_Z_tmp);
			parameter_msg.Y_Swing_Shift = Number(Y_Swing_Shift_tmp);
			parameter_msg.X_Swing_COM = Number(X_Swing_COM_tmp);
			parameter_msg.BASE_LIFT_Z = Number(BASE_LIFT_Z_tmp);
			web_parameter_Topic.publish(parameter_msg);
		}
		function changeX_Swing_value(value) {
			X_Swing_Range_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("X_Swing").value = X_Swing_Range_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cX_Swing").value = X_Swing_Range_tmp;
					break;
				case 2:
					document.getElementById("luX_Swing").value = X_Swing_Range_tmp;
					break;
				case 3:
					document.getElementById("ldX_Swing").value = X_Swing_Range_tmp;
					break;
			}

		}
		function changeY_Swing_value(value) {
			Y_Swing_Range_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("Y_Swing").value = Y_Swing_Range_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cY_Swing").value = Y_Swing_Range_tmp;
					break;
				case 2:
					document.getElementById("luY_Swing").value = Y_Swing_Range_tmp;
					break;
				case 3:
					document.getElementById("ldY_Swing").value = Y_Swing_Range_tmp;
					break;
			}
		}
		function changeZ_Swing_value(value) {
			Z_Swing_Range_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("Z_Swing").value = Z_Swing_Range_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cZ_Swing").value = Z_Swing_Range_tmp;
					break;
				case 2:
					document.getElementById("luZ_Swing").value = Z_Swing_Range_tmp;
					break;
				case 3:
					document.getElementById("ldZ_Swing").value = Z_Swing_Range_tmp;
					break;
			}
		}
		function changePeriod_T_value(value) {
			Period_T_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("Period_T").value = Period_T_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cPeriod_T").value = Period_T_tmp;
					break;
				case 2:
					document.getElementById("luPeriod_T").value = Period_T_tmp;
					break;
				case 3:
					document.getElementById("ldPeriod_T").value = Period_T_tmp;
					break;
			}
		}
		function changePeriod_T2_value(value) {
			Period_T2_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("Period_T2").value = Period_T2_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cPeriod_T2").value = Period_T2_tmp;
					break;
				case 2:
					document.getElementById("luPeriod_T2").value = Period_T2_tmp;
					break;
				case 3:
					document.getElementById("ldPeriod_T2").value = Period_T2_tmp;
					break;
			}
		}
		function changeSample_Time_value(value) {
			Sample_Time_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("Sample_Time").value = Sample_Time_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cSample_Time").value = Sample_Time_tmp;
					break;
				case 2:
					document.getElementById("luSample_Time").value = Sample_Time_tmp;
					break;
				case 3:
					document.getElementById("ldSample_Time").value = Sample_Time_tmp;
					break;
			}
		}
		function changeOSC_LockRange_value(value) {
			OSC_LockRange_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("OSC_LockRange").value = OSC_LockRange_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cOSC_LockRange").value = OSC_LockRange_tmp;
					break;
				case 2:
					document.getElementById("luOSC_LockRange").value = OSC_LockRange_tmp;
					break;
				case 3:
					document.getElementById("ldOSC_LockRange").value = OSC_LockRange_tmp;
					break;
			}
		}
		function changeBASE_Default_Z_value(value) {
			BASE_Default_Z_tmp = value;
			switch (statetype) {
				case 6:
				case 5:
				case 4:
				case 0:
					document.getElementById("BASE_Default_Z").value = BASE_Default_Z_tmp;
					break;
				case 7:
				case 8:
				case 1:
					document.getElementById("cBASE_Default_Z").value = BASE_Default_Z_tmp;
					break;
				case 2:
					document.getElementById("luBASE_Default_Z").value = BASE_Default_Z_tmp;
					break;
				case 3:
					document.getElementById("ldBASE_Default_Z").value = BASE_Default_Z_tmp;
					break;
			}
		}
		function changeY_Swing_Shift_value(value) {
			Y_Swing_Shift_tmp = value;
			document.getElementById("Y_Swing_Shift").value = Y_Swing_Shift_tmp;
		}
		function changeX_Swing_COM_value(value) {
			X_Swing_COM_tmp = value;
			switch (statetype) {
				case 2:
					document.getElementById("luX_Swing_COM").value = X_Swing_COM_tmp;
					break;
				case 3:
					document.getElementById("ldX_Swing_COM").value = X_Swing_COM_tmp;
					break;
			}
		}
		function changeBASE_LIFT_Z_value(value) {
			BASE_LIFT_Z_tmp = value;
			switch (statetype) {
				case 2:
					document.getElementById("luBASE_LIFT_Z").value = BASE_LIFT_Z_tmp;
					break;
				case 3:
					document.getElementById("ldBASE_LIFT_Z").value = BASE_LIFT_Z_tmp;
					break;
			}
		}
		function changeContinuousback() 
		{
			if (document.getElementById("Continuousback").checked) {
				Continuousback_msg.data = true;
				console.log("checked");
			}
			else {
				Continuousback_msg.data = false;
				console.log("unchecked");
			}
			Continuousback_Topic.publish(Continuousback_msg);
		}
		Wave_Topic.subscribe(function (msg) 
		{
			msg.wavelist.clear;
			point.clear;
			r_move_x.clear;
			l_move_x.clear;
			for (var i = 0; i < msg.wavelist.length; i++) 
			{
				r_move_x[i] = msg.wavelist[i].R_move_X;
				l_move_x[i] = msg.wavelist[i].L_move_X;
				r_move_y[i] = msg.wavelist[i].R_move_Y;
				l_move_y[i] = msg.wavelist[i].L_move_Y;
				r_move_z[i] = msg.wavelist[i].R_move_Z;
				l_move_z[i] = msg.wavelist[i].L_move_Z;
				move_com_x[i] = msg.wavelist[i].move_COM_X;
				move_com_y[i] = msg.wavelist[i].move_COM_Y;
				move_com_z[i] = msg.wavelist[i].move_COM_Z;
				r_Thta[i] = msg.wavelist[i].R_Thta;
				l_Thta[i] = msg.wavelist[i].L_Thta;
				point[i] = msg.wavelist[i].Point;
			}
			datalong = msg.wavelist.length;
			console.log(datalong);
		});

		function DrawaXYaxisfun()
		{
			var onepoint = document.getElementById("myCanvas");
			var cxt = onepoint.getContext("2d");
			cxt.strokeStyle = '#FFF2F2';
			cxt.lineWidth = 3;
			cxt.beginPath();
			cxt.moveTo(0, 200);
			cxt.lineTo(0, 0);
			cxt.stroke();
			cxt.beginPath();
			cxt.moveTo(0, 100);
			cxt.lineTo(1000, 100);
			cxt.stroke();
			cxt.moveTo(0, 200);
			cxt.beginPath();
		}

		function DrawPointfun(xpointvalue,ypointvalue)
		{
			var onepoint = document.getElementById("myCanvas");
			var cxt = onepoint.getContext("2d");
			if(waveinitflag==true)
			{
				DrawaXYaxisfun()
				waveinitflag=false;
			}
			switch(wavecolor)
			{
				case 0:
					if(document.getElementById("checkRmoveX").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#EB0000";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);			
					}
					break;
				case 1:
					if(document.getElementById("checkRmoveY").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#F09C00";
						cxt.lineTo(xpointvalue,ypointvalue);					
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 2:
					if(document.getElementById("checkRmoveZ").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#FFFF3B";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle ="#333";
						cxt.lineTo(xpointvalue,ypointvalue);				
					}

					break;
				case 3:
					if(document.getElementById("checkRThta").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#4FFF4F";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 4:
					if(document.getElementById("checkLmoveX").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#008A00";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 5:
					if(document.getElementById("checkLmoveY").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#45FFFF";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 6:
					if(document.getElementById("checkLmoveZ").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#00B2B2";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 7:
					if(document.getElementById("checkLThta").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#8C8CFF";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 8:
					if(document.getElementById("checkmoveCOMX").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#0000DB";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 9:
					if(document.getElementById("checkmoveCOMY").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#8D00F5";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
				case 10:
					if(document.getElementById("checkmoveCOMZ").checked)
					{
						cxt.lineWidth = 1;
						cxt.strokeStyle="#E8E8E8";
						cxt.lineTo(xpointvalue,ypointvalue);
					}else{
						cxt.lineWidth = 4;
						cxt.strokeStyle="#333";
						cxt.lineTo(xpointvalue,ypointvalue);
					}

					break;
			}	
			cxt.stroke();
		}
		function DrawRmoveXFun(){
			wavecolor=0;
			if(document.getElementById("checkRmoveX").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * r_move_x[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveY").checked) 
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked) 
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15*r_move_x[i]);
					r_move_x_tmp[i] = r_move_x[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}

		function DrawRmoveYFun(){
			wavecolor=1;
			if(document.getElementById("checkRmoveY").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * r_move_y[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* r_move_y[i]);
					r_move_y_tmp[i] = r_move_y[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}

		function DrawRmoveZFun(){
			wavecolor=2;
			if(document.getElementById("checkRmoveZ").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * r_move_z[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
					console.log("d");
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* r_move_z[i]);
					r_move_z_tmp[i] = r_move_z[i];
				}
				datalong_tmp = datalong;
				console.log("c");
			}
			waveinitflag=true;
		}

		function DrawRThtaFun(){
			wavecolor=3;
			if(document.getElementById("checkRThta").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * r_Thta[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* r_Thta[i]);
					r_Thta_tmp[i] = r_Thta[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}

		function DrawLmoveXFun(){
			wavecolor=4;
			if(document.getElementById("checkLmoveX").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * l_move_x[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* l_move_x[i]);
					l_move_x_tmp[i] = l_move_x[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}

		function DrawLmoveYFun(){
			wavecolor=5;
			if(document.getElementById("checkLmoveY").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * l_move_y[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* l_move_y[i]);
					l_move_y_tmp[i] = l_move_y[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}
		function DrawLmoveZFun(){
			wavecolor=6;
			if(document.getElementById("checkLmoveZ").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * l_move_z[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
					console.log("a");
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* l_move_z[i]);
					l_move_z_tmp[i] = l_move_z[i];
				}
				datalong_tmp = datalong;
				console.log("b");
			}
			waveinitflag=true;
		}
		function DrawLThtaFun(){
			wavecolor=7;
			if(document.getElementById("checkLThta").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * l_Thta[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* l_Thta[i]);
					l_Thta_tmp[i] = l_Thta[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}
		function DrawmoveCOMXFun(){
			wavecolor=8;
			if(document.getElementById("checkmoveCOMX").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * move_com_x[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* move_com_x[i]);
					move_com_x_tmp[i] = move_com_x[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}
		function DrawmoveCOMYFun(){
			wavecolor=9;
			if(document.getElementById("checkmoveCOMY").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 15 * move_com_y[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMZ").checked)
					DrawmoveCOMZFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-15* move_com_y[i]);
					move_com_y_tmp[i] = move_com_y[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}
		function DrawmoveCOMZFun(){
			wavecolor=10;
			if(document.getElementById("checkmoveCOMZ").checked == false)
			{
				for (var i = 2; i < datalong; i++) 
				{
					DrawPointfun(i, 100 - 3 * move_com_z[i]);
				}
				DrawaXYaxisfun();
				if (document.getElementById("checkRmoveX").checked)
					DrawRmoveXFun();
				if (document.getElementById("checkRmoveY").checked)
					DrawRmoveYFun();
				if (document.getElementById("checkRmoveZ").checked)
					DrawRmoveZFun();
				if (document.getElementById("checkRThta").checked)
					DrawRThtaFun();
				if (document.getElementById("checkLmoveX").checked)
					DrawLmoveXFun();
				if (document.getElementById("checkLmoveY").checked)
					DrawLmoveYFun();
				if (document.getElementById("checkLmoveZ").checked)
					DrawLmoveZFun();
				if (document.getElementById("checkLThta").checked)
					DrawLThtaFun();
				if (document.getElementById("checkmoveCOMX").checked)
					DrawmoveCOMXFun();
				if (document.getElementById("checkmoveCOMY").checked)
					DrawmoveCOMYFun();
			}
			else
			{
				for(var i=2;i<datalong;i++)
				{	
					DrawPointfun(i,100-3* move_com_z[i]);
					move_com_z_tmp[i] = move_com_z[i];
				}
				datalong_tmp = datalong;
			}
			waveinitflag=true;
		}

		function showwavefun()
		{
			if(document.getElementById("wavebutton").checked == true)
			{
				document.getElementById("Wave").style.display = "inline";
			}
			else
			{
				document.getElementById("Wave").style.display = "none";
				WaveRequest_msg.data = false;
				WaveRequest_Topic.publish(WaveRequest_msg);
			}
			
		}

		function ShowSensor_InforFun() 
		{
			if (document.getElementById("Sensor_Information_Button").checked == true) 
			{
				document.getElementById("SensorSet").style.display = "inline";
				document.getElementById("SensorValue").style.display = "inline";
				document.getElementById("walkinggaitcontrol").style.marginLeft = "0%";
			}
			else 
			{
				document.getElementById("SensorSet").style.display = "none";
				document.getElementById("SensorValue").style.display = "none";
				document.getElementById("walkinggaitcontrol").style.marginLeft = "15%";
			}
		}

		function GenerateWaveFun()
		{
			WaveRequest_msg.data = true;
			WaveRequest_Topic.publish(WaveRequest_msg);
		}

		function SendSensorSet()
		{
			var roll = Number(document.getElementById("Set_Roll").value);
			var pitch = Number(document.getElementById("Set_Pitch").value);
			var yaw = Number(document.getElementById("Set_Yaw").value);
			SensorSet_msg.Roll = parseInt(roll * 100);
			SensorSet_msg.Pitch = parseInt(pitch * 100);
			SensorSet_msg.Yaw = parseInt(yaw * 100);
			if(document.getElementById("SensorValueReq").checked)
			{
				SensorSet_msg.SensorReq = true;
			}
			else
			{
				SensorSet_msg.SensorReq = false;
			}
			if (document.getElementById("ForceOffsetReset").checked) {
				SensorSet_msg.ForceOffsetReset = true;
			}
			else {
				SensorSet_msg.ForceOffsetReset = false;
			}
			if (document.getElementById("ForceState").checked) {
				SensorSet_msg.ForceState = true;
			}
			else {
				SensorSet_msg.ForceState = false;
			}
			SensorSet_Publisher.publish(SensorSet_msg);
		}
		function ClearDrawFun(){
			document.getElementById("checkRmoveX").checked=false;
			document.getElementById("checkRmoveY").checked=false;
			document.getElementById("checkRmoveZ").checked=false;
			document.getElementById("checkRThta").checked=false;
			document.getElementById("checkLmoveX").checked=false;
			document.getElementById("checkLmoveY").checked=false;
			document.getElementById("checkLmoveZ").checked=false;
			document.getElementById("checkLThta").checked=false;
			document.getElementById("checkmoveCOMX").checked=false;
			document.getElementById("checkmoveCOMY").checked=false;
			document.getElementById("checkmoveCOMZ").checked=false;
			var onepoint = document.getElementById("myCanvas");
			var cxt = onepoint.getContext("2d");
			cxt.fillStyle = "#333";
			cxt.fillRect(0, 0, 350, 200);
			cxt.strokeStyle = '#FFF2F2';
			cxt.lineWidth = 3;
			cxt.beginPath();
			cxt.moveTo(0, 200);
			cxt.lineTo(0, 0);
			cxt.stroke();
			cxt.beginPath();
			cxt.moveTo(0, 100);
			cxt.lineTo(1000, 100);
			cxt.stroke();
			cxt.moveTo(0, 200);
			cxt.beginPath();
		}
	</script>
</head>

<body>
	<!-- NAV BAR -->
	<ul>
		<li><a target="_blank" style="text-decoration: underline;" class="navbarright" href="WalkingInterface.html">Walking
				Interface</a></li>
		<li><a target="_blank" class="navbarright" href="ImageProcessInterface.html">Humanoid Interface</a></li>
		<li><a target="_blank" class="navbarright" href="MotionControlInterface.html">Motion Controller</a></li>
		<li><a target="_blank" class="navbarright" href="index.html">Home</a></li>
		<li class="logo">
			<a target="_blank" href="index.html" class="logo"><img id="logoimg" src="./resources/TKU_ICLab/iclablogo-02.png"></a>
		</li>
	</ul>
	<br />

	<p id="connected" style="color:#00D600; display: none; font-size: 20px;">
		Connected
	</p>
	<h1 align="center" id="header" style="color: white;">Walking Interface</h1>
	<form>
		<div id="control" align="center">
			<section id="SensorSet" align="left" style="float: left;width: 180px;display: none;">
				<h align="center" style="font-size: 25px">Sensor_Set</h></br>
				<table style="margin-top: 10px ">
					<tr>
						<td>Set_Roll:</td>
						<td><input type="test" name="Set_Roll" id="Set_Roll" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Set_Pitch:</td>
						<td><input type="test" name="Set_Pitch" id="Set_Pitch" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Set_Yaw:</td>
						<td><input type="test" name="Set_Yaw" id="Set_Yaw" value="0" style="width: 70px"></td>
					</tr>
				</table>
				<input style="margin-top: 10px " type="checkbox" id="SensorValueReq" value="SensorValueReq">ShowSensorValue
				<input style="margin-top: 10px " type="checkbox" id="ForceOffsetReset" value="ForceOffsetReset">ForceOffsetReset
				<input style="margin-top: 10px " type="checkbox" id="ForceState" value="ForceState">ForceState
				<button type="button" style="width: 100px;height: 40px; margin-left: 20px; margin-top: 20px;display: inline-block;" onclick="SendSensorSet()">Send</button>
			</section>
			<section id="SensorValue" align="left" style="float: left;width: 180px;display: none;">
				<h align="center"style="font-size: 25px">Sensor_Value</h>
				<table>
					<tr>
						<td style="color:#888;font-size: 18px">IMU:</td>
					</tr>
					<tr>
						<td>Roll:</td>
						<td><input type="test" name="Roll" id="Roll" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Pitch:</td>
						<td><input type="test" name="Pitch" id="Pitch" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Yaw:</td>
						<td><input type="test" name="Yaw" id="Yaw" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>&nbsp</td>
					</tr>
					<tr>
						<td style="color:#888;font-size: 18px">Force:</td>
					</tr>
					<tr>
						<td>Left_1:</td>
						<td><input type="test" name="Left_1" id="Left_1" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Left_2:</td>
						<td><input type="test" name="Left_2" id="Left_2" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Left_3:</td>
						<td><input type="test" name="Left_3" id="Left_3" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Left_4:</td>
						<td><input type="test" name="Left_4" id="Left_4" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Right_1:</td>
						<td><input type="test" name="Right_1" id="Right_1" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Right_2:</td>
						<td><input type="test" name="Right_2" id="Right_2" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Right_3:</td>
						<td><input type="test" name="Right_3" id="Right_3" value="0" style="width: 70px"></td>
					</tr>
					<tr>
						<td>Right_4:</td>
						<td><input type="test" name="Right_4" id="Right_4" value="0" style="width: 70px"></td>
					</tr>
				</table>
			</section>
			<section id="walkinggaitcontrol" style="float: left;margin-left: 15%">
				<form action="">
					<input type="radio" name="gender" value="Single" onclick="singleFun()" checked="checked"> Single
					<input type="radio" name="gender" value="Single_wood" onclick="Single_woodFun()"> Single_wood
					<input type="radio" name="gender" value="Single_third" onclick="Single_thirdFun()"> Single_third
					<input type="radio" name="gender" value="LC_up" onclick="LC_upFun()"> LC_up<p></p>
					<input type="radio" name="gender" value="LC_down" onclick="LC_downFun()"> LC_down
					<input type="radio" name="gender" value="LongJump" onclick="LongJumpFun()"> Long_Jump
					<input type="radio" name="gender" value="Continuous" onclick="ContinuousFun()"> Continuous<p></p>
					<input type="radio" name="gender" value="Continuous_second" onclick="Continuous_Second_Fun()"> Continuous_second
					<input type="radio" name="gender" value="Continuous_third" onclick="Continuous_Third_Fun()"> Continuous_third<p></p>
				</form>
				<form>
					<table>
						<tr>
							<td>X</td>
							<td><input type="test" name="Xvalue" id="Xvalue" value="0" onchange="changeXvalue(this.value)"></td>
						</tr>
						<tr>
							<td>Y</td>
							<td><input type="test" name="Yvalue" id="Yvalue" value="0" onchange="changeYvalue(this.value)"></td>
						</tr>
						<tr>
							<td>Z</td>
							<td><input type="test" name="Zvalue" id="Zvalue" value="0"></td>
						</tr>
						<tr>
							<td>Theta</td>
							<td><input type="test" name="Thtavalue" id="Thtavalue" value="0" onchange="changethtavalue(this.value)"></td>
						</tr>
					</table>
					<br />
					<button type="button" style="width: 132px;height: 40px; margin: 2px; display: inline-block;" onclick="Load()">Load</button>
					<input type="button" id="Generate_Button" style="width: 132px;height: 40px; margin: 2px; display: inline-block;"
					 onclick="Generate()" value="Generate"></input>
					<br />

					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" onclick="LeftTurnFun()">Left
						Turn</button>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" onclick="ForwardFun()">Forward</button>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" onclick="RightTurnFun()">Right
						Turn</button>
					<br>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; disbplay: inline-block;" onclick="LeftFun()">Left
						Move</button>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" onclick="StopFun()">Stop</button>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" onclick="RightFun()">Right
						Move</button>
					<br>
					<button type="button" style="width: 85px;height: 40px; margin: 2px; display: inline-block;" id="ggg" onclick="BackwardFun()">Backward</button>&nbsp
					<br>
					<div style="float:left; margin-top: 40px;margin-right: 10px" ;>
						<input type="checkbox" id="wavebutton" value="Wave" onclick="showwavefun()"> Wave
					</div>
					<div style="float:left; margin-top: 40px;margin-right: 10px" ;>
						<input type="checkbox" id="Sensor_Information_Button" value="Sensor_Information" onclick="ShowSensor_InforFun()"> Sensor_Information
					</div>
					<form>
						<select id="IMU_Control" style="width: 80px;height: 25px;float: right;margin-top: 40px;">
							<option value="0">No_IMU</option>
								<option value="1">Y_IMU</option>
								<option value="2">X_IMU</option>
								<option value="3">ALL_IMU</option>
								</select>
					</form>
					<!--input type="submit" name="button" style="width: 250px;height: 25px" value="Quit" onclick="window.close()"/-->
				</form>
			</section>
			<section id="singlestep" style="float: left;">
				<b style="font-size: 25px;">Single Step</b>
				<b style="font-size: 25px; display: none;" id="LongJumpTitle"> - Long Jump</b>
				<b style="font-size: 25px; display: none;" id="Wood"> - Wood</b>
				<b style="font-size: 25px; display: none;" id="singlestep_third"> - Third</b>
				<br /><br />
				<table>
					<!--<th style="text-align: center;">Single Step</th>
	    			<th id="LongJumpTitle" style="display: none;">LongJump</th>
					<th id="Wood" style="display: none;">Wood</th> -->
					<tr>
						<td>X_Swing</td>
						<td><input type="test" name="X_Swing" id="X_Swing" value="0" onchange="changeX_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Y_Swing</td>
						<td><input type="test" name="Y_Swing" id="Y_Swing" value="0" onchange="changeY_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Z_Swing</td>
						<td><input type="test" name="Z_Swing" id="Z_Swing" value="0" onchange="changeZ_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T</td>
						<td><input type="test" name="Period_T" id="Period_T" value="0" onchange="changePeriod_T_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T2</td>
						<td><input type="test" name="Period_T2" id="Period_T2" value="0" onchange="changePeriod_T2_value(this.value)"></td>
					</tr>
					<tr>
						<td>Sample_Time</td>
						<td><input type="test" name="Sample_Time" id="Sample_Time" value="0" onchange="changeSample_Time_value(this.value)"></td>
					</tr>
					<tr>
						<td>OSC_LockRange</td>
						<td><input type="test" name="OSC_LockRange" id="OSC_LockRange" value="0" onchange="changeOSC_LockRange_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_Default_Z</td>
						<td><input type="test" name="BASE_Default_Z" id="BASE_Default_Z" value="0" onchange="changeBASE_Default_Z_value(this.value)"></td>
					</tr>
					<tr>
						<td>Y_Swing_Shift</td>
						<td><input type="test" name="Y_Swing_Shift" id="Y_Swing_Shift" value="0" onchange="changeY_Swing_Shift_value(this.value)"></td>
					</tr>
				</table>
				<br />
				<button type="button" style="width: 80px;height: 40px; margin-top: 9px;" id="sss" onclick="Save()">Save</button>

			</section>
			<section id="continuousstep" style="float: left; display: none;">

				<b style="font-size: 25px;">Continuous Step</b>
				<b style="font-size: 25px; display: none;" id="continuousstep_second"> - Second</b>
				<b style="font-size: 25px; display: none;" id="continuousstep_third"> - third</b>
				&nbsp;&nbsp; <input type="checkbox" name="Continuousback" id="Continuousback" onclick="changeContinuousback()">Back
				<br /><br />
				<table>

					<tr>
						<td>X_Swing</td>
						<td><input type="test" name="X_Swing" id="cX_Swing" value="0" onchange="changeX_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Y_Swing</td>
						<td><input type="test" name="Y_Swing" id="cY_Swing" value="0" onchange="changeY_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Z_Swing</td>
						<td><input type="test" name="Z_Swing" id="cZ_Swing" value="0" onchange="changeZ_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T</td>
						<td><input type="test" name="Period_T" id="cPeriod_T" value="0" onchange="changePeriod_T_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T2</td>
						<td><input type="test" name="Period_T2" id="cPeriod_T2" value="0" onchange="changePeriod_T2_value(this.value)"></td>
					</tr>
					<tr>
						<td>Sample_Time</td>
						<td><input type="test" name="Sample_Time" id="cSample_Time" value="0" onchange="changeSample_Time_value(this.value)"></td>
					</tr>
					<tr>
						<td>OSC_LockRange</td>
						<td><input type="test" name="OSC_LockRange" id="cOSC_LockRange" value="0" onchange="changeOSC_LockRange_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_Default_Z</td>
						<td><input type="test" name="BASE_Default_Z" id="cBASE_Default_Z" value="0" onchange="changeBASE_Default_Z_value(this.value)"></td>
					</tr>
				</table>
				<br />
				<button type="button" style="width: 80px;height: 40px; margin-top: 9px;" id="sss" onclick="Save()">Save</button>
			</section>
			<section id="lcupstep" style="float: left; display: none;">

				<b style="font-size: 25px;">LCup Step</b>
				<br /><br />
				<table>
					<tr>
						<td>-X_Swing_COM</td>
						<td><input type="test" name="X_Swing" id="luX_Swing" value="0" onchange="changeX_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Y_Swing</td>
						<td><input type="test" name="Y_Swing" id="luY_Swing" value="0" onchange="changeY_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Z_Swing</td>
						<td><input type="test" name="Z_Swing" id="luZ_Swing" value="0" onchange="changeZ_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T</td>
						<td><input type="test" name="Period_T" id="luPeriod_T" value="0" onchange="changePeriod_T_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T2</td>
						<td><input type="test" name="Period_T2" id="luPeriod_T2" value="0" onchange="changePeriod_T2_value(this.value)"></td>
					</tr>
					<tr>
						<td>Sample_Time</td>
						<td><input type="test" name="Sample_Time" id="luSample_Time" value="0" onchange="changeSample_Time_value(this.value)"></td>
					</tr>
					<tr>
						<td>OSC_LockRange</td>
						<td><input type="test" name="OSC_LockRange" id="luOSC_LockRange" value="0" onchange="changeOSC_LockRange_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_Default_Z</td>
						<td><input type="test" name="BASE_Default_Z" id="luBASE_Default_Z" value="0" onchange="changeBASE_Default_Z_value(this.value)"></td>
					</tr>
					<tr>
						<td>X_Swing_COM</td>
						<td><input type="test" name="X_Swing_COM" id="luX_Swing_COM" value="0" onchange="changeX_Swing_COM_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_LIFT_Z</td>
						<td><input type="test" name="BASE_LIFT_Z" id="luBASE_LIFT_Z" value="0" onchange="changeBASE_LIFT_Z_value(this.value)"></td>
					</tr>
				</table>
				<br />
				<button type="button" style="width: 80px;height: 40px; margin-top: 9px;" id="sss" onclick="Save()">Save</button>
			</section>
			<section id="lcdownstep" style="float: left; display: none;">

				<b style="font-size: 25px;">LCdown Step</b>
				<br /><br />
				<table>
					<tr>
						<td>-X_Swing_COM</td>
						<td><input type="test" name="X_Swing" id="ldX_Swing" value="0" onchange="changeX_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Y_Swing</td>
						<td><input type="test" name="Y_Swing" id="ldY_Swing" value="0" onchange="changeY_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Z_Swing</td>
						<td><input type="test" name="Z_Swing" id="ldZ_Swing" value="0" onchange="changeZ_Swing_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T</td>
						<td><input type="test" name="Period_T" id="ldPeriod_T" value="0" onchange="changePeriod_T_value(this.value)"></td>
					</tr>
					<tr>
						<td>Period_T2</td>
						<td><input type="test" name="Period_T2" id="ldPeriod_T2" value="0" onchange="changePeriod_T2_value(this.value)"></td>
					</tr>
					<tr>
						<td>Sample_Time</td>
						<td><input type="test" name="Sample_Time" id="ldSample_Time" value="0" onchange="changeSample_Time_value(this.value)"></td>
					</tr>
					<tr>
						<td>OSC_LockRange</td>
						<td><input type="test" name="OSC_LockRange" id="ldOSC_LockRange" value="0" onchange="changeOSC_LockRange_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_Default_Z</td>
						<td><input type="test" name="BASE_Default_Z" id="ldBASE_Default_Z" value="0" onchange="changeBASE_Default_Z_value(this.value)"></td>
					</tr>
					<tr>
						<td>X_Swing_COM</td>
						<td><input type="test" name="X_Swing_COM" id="ldX_Swing_COM" value="0" onchange="changeX_Swing_COM_value(this.value)"></td>
					</tr>
					<tr>
						<td>BASE_LIFT_Z</td>
						<td><input type="test" name="BASE_LIFT_Z" id="ldBASE_LIFT_Z" value="0" onchange="changeBASE_LIFT_Z_value(this.value)"></td>
					</tr>
				</table>
				<br />
				<button type="button" style="width: 80px;height: 40px; margin-top: 9px;" id="sss" onclick="Save()">Save</button>
			</section>
			<div id="Wave" style="float: right; display: none; margin-right: 14%;">
				<form action="" style="float: left;">
					<input type="checkbox" id="checkRmoveX" onclick="DrawRmoveXFun()"> R_move_X
					<input type="checkbox" id="checkRmoveY" onclick="DrawRmoveYFun()"> R_move_Y
					<input type="checkbox" id="checkRmoveZ" onclick="DrawRmoveZFun()"> R_move_Z
					<input type="checkbox" id="checkRThta" onclick="DrawRThtaFun()"> R_Thta<p></p>
					<input type="checkbox" id="checkLmoveX" onclick="DrawLmoveXFun()"> L_move_X
					<input type="checkbox" id="checkLmoveY" onclick="DrawLmoveYFun()"> L_move_Y
					<input type="checkbox" id="checkLmoveZ" onclick="DrawLmoveZFun()"> L_move_Z
					<input type="checkbox" id="checkLThta" onclick="DrawLThtaFun()"> L_Thta<p></p>
					<input type="checkbox" id="checkmoveCOMX" onclick="DrawmoveCOMXFun()"> move_COM_X
					<input type="checkbox" id="checkmoveCOMY" onclick="DrawmoveCOMYFun()"> move_COM_Y
					<input type="checkbox" id="checkmoveCOMZ" onclick="DrawmoveCOMZFun()"> move_COM_Z<p></p>
					<br>
			
					</br>
					<b style="font-size: 25px ;float: left;margin: 10px;">Wave</b>
					<td><button type="button" style="width: 150px;height: 40px;float: left;margin-right: 10px;margin-left: 15px" id="GenerateWave" onclick="GenerateWaveFun()">GenerateWave</button></td>
					<td><button type="button" style="width: 80px;height: 40px;float: left;margin-right: 10px;" id="DrawWave" onclick="ClearDrawFun()">Clear</button></td>
				</form>
				<table>
					<canvas id="myCanvas" width="350" height="200" ; ">
					</canvas>
				</table>
			</div>
		</div>
	</form>
</body>

</html>
